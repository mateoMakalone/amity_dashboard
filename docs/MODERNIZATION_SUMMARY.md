# üéâ –ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è KPI Dashboard - –ó–ê–í–ï–†–®–ï–ù–ê

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–∞—è –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è KPI Dashboard —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!**

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. **üîß Backend –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è**
   - ‚úÖ –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –Ω–∞–ø—Ä—è–º—É—é —Å `/metrics`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/kpi/config` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ KPI
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Prometheus

2. **‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - ‚úÖ –°–æ–∑–¥–∞–Ω –º–∞—Å—Å–∏–≤ `KPI_METRICS_CONFIG` —Å 10 –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã PromQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—Ä–æ–≥–∏ warning/critical –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
   - ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏ (15/30/45/60 –º–∏–Ω—É—Ç)
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫–∞ `postgres_dead_rows`

3. **üé® Frontend –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è**
   - ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `dashboard.html` —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
   - ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `dashboard.js` —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
   - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ Plotly.js
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
   - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ HTML

4. **üìà –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –≤—Ä–µ–º–µ–Ω–∏
   - ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   - ‚úÖ –°—Ç–∞—Ç—É—Å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (OK/Warning/Critical)
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –Ω–∞ UI
   - ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –î–æ –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏
```
–°—Ç–∞—Ä—ã–π –¥–∞—à–±–æ—Ä–¥:
‚îú‚îÄ‚îÄ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
‚îú‚îÄ‚îÄ –ü—Ä–æ—Å—Ç—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
‚îú‚îÄ‚îÄ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
‚îî‚îÄ‚îÄ –ë–µ–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞
```

### –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏
```
–ù–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥:
‚îú‚îÄ‚îÄ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ KPI —Å PromQL
‚îú‚îÄ‚îÄ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ Plotly.js
‚îú‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏
‚îú‚îÄ‚îÄ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
‚îú‚îÄ‚îÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI
‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
- `app/config.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã KPI_METRICS_CONFIG, TIME_INTERVALS, PROMETHEUS_URL
- `app/routes.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `app/metrics.py` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞

### Frontend  
- `app/templates/dashboard.html` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
- `app/static/js/dashboard.js` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- `test_modernized_dashboard.py` - —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- `README_MODERNIZATION.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `MODERNIZATION_SUMMARY.md` - —ç—Ç–æ —Ä–µ–∑—é–º–µ

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. KPI-–º–µ—Ç—Ä–∏–∫–∏
```python
# –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
{
    "id": "api_response_time",
    "title": "–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API",
    "promql": 'avg(rate(jetty_server_requests_seconds_sum{outcome="SUCCESS",status="200"}[1m])) / avg(rate(jetty_server_requests_seconds_count{outcome="SUCCESS",status="200"}[1m]))',
    "unit": "—Å–µ–∫",
    "color": "#e74c3c",
    "format": "fixed3",
    "thresholds": {"warning": 0.5, "critical": 1.0}
}
```

### 2. –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏
- 15 –º–∏–Ω—É—Ç
- 30 –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- 45 –º–∏–Ω—É—Ç  
- 60 –º–∏–Ω—É—Ç

### 3. –ì—Ä–∞—Ñ–∏–∫–∏
- **–õ–∏–Ω–µ–π–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏**: –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã —Å hover-–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
- **–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã**: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω**: –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞

### 4. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
- Standalone HTML —Ñ–∞–π–ª
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫
```bash
python run.py
```

### –î–æ—Å—Ç—É–ø
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: http://localhost:5000/
- API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: http://localhost:5000/api/kpi/config
- –ú–µ—Ç—Ä–∏–∫–∏: http://localhost:9090/metrics

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
python test_modernized_dashboard.py
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π KPI-–º–µ—Ç—Ä–∏–∫–∏
1. –î–æ–±–∞–≤–∏—Ç—å –≤ `KPI_METRICS_CONFIG` –≤ `config.py`
2. –£–∫–∞–∑–∞—Ç—å PromQL –∑–∞–ø—Ä–æ—Å
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `TIME_INTERVALS` –≤ `config.py`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Prometheus
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- Debounced –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
```python
print(f"[DEBUG] KPI config loaded: {len(kpiConfig)} metrics")
print(f"[DEBUG] Prometheus query: {query}")
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
curl http://localhost:5000/api/kpi/config
curl http://localhost:9090/metrics
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ª–µ–π–±–ª–∞–º** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–µ—Ç—Ä–∏–∫
2. **–ê–ª–µ—Ä—Ç—ã** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤
3. **–î–∞—à–±–æ—Ä–¥—ã** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Ç—Ä–µ–Ω–¥—ã –∏ –∞–Ω–æ–º–∞–ª–∏–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [x] API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ KPI
- [x] –ü—Ä–æ–∫—Å–∏ Prometheus
- [x] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [x] API –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [x] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ KPI-–º–µ—Ç—Ä–∏–∫
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- [x] –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
- [x] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- [x] –≠–∫—Å–ø–æ—Ä—Ç HTML

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è KPI Dashboard —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!**

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏
‚úÖ –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ –æ—Ç —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤  
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Plotly.js –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤  
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º  
‚úÖ –í—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Prometheus  
‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É  
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∏ –∏ —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞  

### –†–µ–∑—É–ª—å—Ç–∞—Ç
–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π KPI Dashboard —Å:
- 10 –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ KPI-–º–µ—Ç—Ä–∏–∫–∞–º–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- –≠–∫—Å–ø–æ—Ä—Ç–æ–º –æ—Ç—á—ë—Ç–æ–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- –û–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

**–î–∞—à–±–æ—Ä–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ** 